# 🎯 一番赏抽奖工具 Vue版

这是一个专为线下活动设计的现代化抽奖工具，支持传统一番赏和概率抽奖两种模式。采用 Vue 3 + TypeScript + Pinia 技术栈，提供优秀的用户体验和开发体验。

## ✨ 主要特性

- 🎲 **双重抽奖模式**：支持一番赏模式和概率抽奖模式
- 💾 **本地数据存储**：所有数据存储在浏览器本地，确保隐私安全
- 📱 **响应式设计**：完美适配桌面端和移动端
- 🎨 **现代化界面**：采用与sansen_planner_vue一致的设计语言
- ⚡ **实时状态管理**：Pinia提供高效的状态管理
- 🔧 **TypeScript支持**：完整的类型检查和开发体验
- 📊 **数据导出**：支持JSON快照和CSV记录导出
- ↩️ **撤销功能**：智能撤销机制，支持跨箱撤销

## 🚀 技术栈

- **前端框架**：Vue 3 (Composition API)
- **类型系统**：TypeScript
- **状态管理**：Pinia
- **路由系统**：Vue Router 4
- **构建工具**：Vite
- **样式方案**：CSS3 + 响应式设计

## 📦 项目结构

```
ichibankuji_vue/
├── src/
│   ├── components/          # 可复用组件
│   │   ├── DrawResultModal.vue    # 抽奖结果模态框
│   │   └── LotteryCard.vue        # 抽奖卡片组件
│   ├── views/              # 页面组件
│   │   ├── Home.vue              # 主页（抽奖列表）
│   │   ├── LotteryConfig.vue     # 抽奖配置页面
│   │   ├── LotteryDraw.vue       # 抽奖执行页面
│   │   └── Documentation.vue     # 使用文档页面
│   ├── stores/             # Pinia状态管理
│   │   └── lottery.ts           # 抽奖状态管理
│   ├── types/              # TypeScript类型定义
│   │   └── lottery.ts           # 抽奖相关类型
│   ├── utils/              # 工具函数
│   │   ├── lottery-engine.ts    # 抽奖算法引擎
│   │   ├── storage.ts           # 本地存储管理
│   │   └── export.ts            # 数据导出功能
│   ├── router/             # 路由配置
│   │   └── index.ts
│   ├── App.vue             # 根组件
│   └── main.ts             # 应用入口
├── package.json            # 项目依赖和脚本
├── tsconfig.json           # TypeScript配置
├── vite.config.ts          # Vite构建配置
└── index.html              # HTML模板
```

## 🎯 功能特性

### 🎲 一番赏模式
- 传统一番赏抽奖规则
- 支持多箱设置和LAST赏机制
- 每箱奖品数量管理
- 自动箱子切换

### 🎲 概率抽奖模式
- 基于权重的概率抽奖
- 每个奖项独立设置概率
- 无限次抽奖支持
- 保底奖品机制

### 💾 数据管理
- 本地浏览器存储
- JSON格式完整快照导出
- CSV格式抽奖记录导出
- 数据导入恢复功能
- 智能撤销机制

### 📱 用户体验
- 响应式设计，移动端友好
- 实时状态更新
- 动画效果和视觉反馈
- 微信环境检测和提示

## 🛠️ 开发进度

### ✅ 第一阶段：基础架构（已完成）
- [x] 创建项目结构和配置文件
- [x] 定义TypeScript类型系统
- [x] 实现核心工具类和算法引擎
- [x] 创建Pinia状态管理
- [x] 设置Vue Router路由
- [x] 创建基础页面和组件框架

### ✅ 第二阶段：核心功能（已完成）
- [x] 完善Pinia store的所有方法实现
- [x] 创建抽奖执行页面(LotteryDraw.vue)
- [x] 创建抽奖结果模态框(DrawResultModal.vue)
- [x] 创建使用文档页面(Documentation.vue)
- [x] 更新路由配置，支持所有页面
- [x] 测试基本功能运行

### 🔄 第三阶段：高级功能（进行中）
- [ ] 完善LotteryConfig页面的详细实现
- [ ] 添加奖项编辑和验证功能
- [ ] 实现文件导入功能
- [ ] 添加主页的搜索和筛选功能
- [ ] 优化移动端体验

### 📋 第四阶段：优化完善（待定）
- [ ] 添加单元测试
- [ ] 性能优化和代码分割
- [ ] 添加更多动画效果
- [ ] 国际化支持
- [ ] PWA支持
- [ ] 部署到生产环境

## 🚀 快速开始

### 安装依赖
```bash
npm install
```

### 启动开发服务器
```bash
npm run dev
```

### 构建生产版本
```bash
npm run build
```

### 预览生产构建
```bash
npm run preview
```

## 📖 使用指南

### 创建抽奖
1. 点击主页的"创建新抽奖"按钮
2. 选择抽奖类型（一番赏或概率抽奖）
3. 填写抽奖名称和基础配置
4. 添加奖项等级、描述和数量/概率
5. 保存配置，开始抽奖

### 执行抽奖
1. 从主页选择要进行的抽奖
2. 进入抽奖页面
3. 输入抽奖者ID（可选）
4. 设置抽奖次数
5. 点击"开始抽奖"查看结果

### 数据管理
- **导出快照**：在主页点击"导出数据"获取完整备份
- **导入快照**：在主页点击"导入数据"恢复备份
- **导出记录**：在抽奖页面点击"导出记录"获取CSV文件
- **撤销抽奖**：在抽奖页面点击"撤销最近抽奖"

## 🎨 设计理念

- **一致性**：与sansen_planner_vue保持一致的设计语言
- **易用性**：简洁直观的操作流程
- **可靠性**：完整的类型检查和错误处理
- **扩展性**：组件化架构，易于扩展新功能
- **性能**：响应式状态管理，高效渲染

## 🤝 技术特色

### 抽奖算法
- **一番赏模式**：真随机洗牌算法，确保公平性
- **概率抽奖**：加权随机算法，支持小数概率
- **LAST赏机制**：智能检测箱子完成状态

### 状态管理
- **Pinia Store**：现代化的状态管理方案
- **响应式更新**：状态变化自动同步到所有组件
- **数据持久化**：自动保存到本地存储

### 类型安全
- **完整类型定义**：所有接口和组件都有类型检查
- **运行时验证**：关键数据的运行时类型检查
- **开发体验**：IDE智能提示和错误检查

## 📄 许可证

本项目基于 MIT 许可证开源。

## 🔗 相关项目

- [sansen_planner_vue](../sansen_planner_vue) - 三线规划工具
- [ichibankuji](../ichibankuji) - 原版H5+JS实现

---

@Torisaboten 2025 | 完全免费，欢迎分享使用 